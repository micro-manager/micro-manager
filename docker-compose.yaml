services:
  micro-manager:
    image: micro-manager:latest
    build:
      context: .
      dockerfile: docker/Dockerfile
    container_name: micromanager-container
    network_mode: host # Required for many hardware device adapters (IP cameras, etc)
    privileged: true   # Required for USB/Serial device access
    environment:
      - DISPLAY=${DISPLAY:-:0}
      - XAUTHORITY=/tmp/.Xauthority/Xauthority
      - TZ=${TZ:-Europe/London}
    volumes:
      - ${X11_UNIX_SOCKET:-/tmp/.X11-unix}:/tmp/.X11-unix
      - ${XAUTH_PATH:-./.Xauthority}:/tmp/.Xauthority:ro
      - /etc/localtime:/etc/localtime:ro
      - /etc/timezone:/etc/timezone:ro
      - /dev:/dev
      - ${MM_DATA_DIR:-~/MicroManagerData}:/data
      - ${MM_CONFIG_DIR:-./configs}:/configs
      - ${MM_PROFILE_DIR:-./profiles}:/root/.config/Micro-Manager
