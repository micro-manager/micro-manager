# This file is part of a progressive rewrite of the GNU (autotools) build
# scripts. Please do not modify this file. Instead, please modify the legacy
# build files (without the .nextgen suffix). Changes to legacy files will be
# automatically detected and manually applied to the next-gen files.
# - Mark Tsuchida
#
# %nextgen_build_filename = Makefile.am
# %nextgen_build_replaces = Makefile.am ede68fccbe0e8299fd43868c6eceb439


# TODO Fix classpath (avoid magic).
MMJ_.jar:  \
	$(srcdir)/src/MMStudioPlugin.java \
	$(srcdir)/src/MANIFEST.MF \
	$(srcdir)/src/DeviceListBuilder.java \
	$(srcdir)/src/MMImage5DReaderPlugin_.java \
	$(srcdir)/src/org/micromanager/AcqControlDlg.java \
	$(srcdir)/src/org/micromanager/AdvancedOptionsDialog.java \
	$(srcdir)/src/org/micromanager/CalibrationEditor.java \
	$(srcdir)/src/org/micromanager/CalibrationListDlg.java \
	$(srcdir)/src/org/micromanager/ConfigDialog.java \
	$(srcdir)/src/org/micromanager/ConfigGroupPad.java \
	$(srcdir)/src/org/micromanager/ConfigPadButtonPanel.java \
	$(srcdir)/src/org/micromanager/GroupEditor.java \
	$(srcdir)/src/org/micromanager/MMAboutDlg.java \
	$(srcdir)/src/org/micromanager/MMIntroDlg.java \
	$(srcdir)/src/org/micromanager/MMOptions.java \
	$(srcdir)/src/org/micromanager/MMStudioMainFrame.java \
	$(srcdir)/src/org/micromanager/MMVersion.java \
	$(srcdir)/src/org/micromanager/OptionsDlg.java \
	$(srcdir)/src/org/micromanager/PluginLoader.java \
	$(srcdir)/src/org/micromanager/PositionListDlg.java \
	$(srcdir)/src/org/micromanager/PresetEditor.java \
	$(srcdir)/src/org/micromanager/PropertyEditor.java \
	$(srcdir)/src/org/micromanager/RegistrationDlg.java \
	$(srcdir)/src/org/micromanager/ReportProblemDialog.java \
	$(srcdir)/src/org/micromanager/ScriptPanel.java \
	$(srcdir)/src/org/micromanager/TileCreatorDlg.java \
	$(srcdir)/src/org/micromanager/license.txt \
	$(srcdir)/src/org/micromanager/acquisition/AcquisitionData.java \
	$(srcdir)/src/org/micromanager/acquisition/AcquisitionManager.java \
	$(srcdir)/src/org/micromanager/acquisition/AcquisitionVirtualStack.java \
	$(srcdir)/src/org/micromanager/acquisition/AcquisitionWrapperEngine.java \
	$(srcdir)/src/org/micromanager/acquisition/ComponentTitledBorder.java \
	$(srcdir)/src/org/micromanager/acquisition/DefaultTaggedImageSink.java \
	$(srcdir)/src/org/micromanager/acquisition/HyperstackControls.java \
	$(srcdir)/src/org/micromanager/acquisition/LiveModeTimer.java \
	$(srcdir)/src/org/micromanager/acquisition/MMAcquisition.java \
	$(srcdir)/src/org/micromanager/acquisition/MMImageCache.java \
	$(srcdir)/src/org/micromanager/acquisition/MetadataPanel.java \
	$(srcdir)/src/org/micromanager/acquisition/MultipageTiffReader.java \
	$(srcdir)/src/org/micromanager/acquisition/MultipageTiffWriter.java \
	$(srcdir)/src/org/micromanager/acquisition/OMEMetadata.java \
	$(srcdir)/src/org/micromanager/acquisition/ProcessorStack.java \
	$(srcdir)/src/org/micromanager/acquisition/SimpleWindowControls.java \
	$(srcdir)/src/org/micromanager/acquisition/TaggedImageQueue.java \
	$(srcdir)/src/org/micromanager/acquisition/TaggedImageStorageDiskDefault.java \
	$(srcdir)/src/org/micromanager/acquisition/TaggedImageStorageMultipageTiff.java \
	$(srcdir)/src/org/micromanager/acquisition/TaggedImageStorageRam.java \
	$(srcdir)/src/org/micromanager/acquisition/TaggedImageStorageRamFast.java \
	$(srcdir)/src/org/micromanager/acquisition/VirtualAcquisitionDisplay.java \
	$(srcdir)/src/org/micromanager/api/Autofocus.java \
	$(srcdir)/src/org/micromanager/api/MMWindow.java \
	$(srcdir)/src/org/micromanager/api/ScriptInterface.java \
	$(srcdir)/src/org/micromanager/conf2/*.html \
	$(srcdir)/src/org/micromanager/conf2/AddDeviceDlg.java \
	$(srcdir)/src/org/micromanager/conf2/ComPropTableModel.java \
	$(srcdir)/src/org/micromanager/conf2/ConfigGroup.java \
	$(srcdir)/src/org/micromanager/conf2/ConfiguratorDlg2.java \
	$(srcdir)/src/org/micromanager/conf2/DelayPage.java \
	$(srcdir)/src/org/micromanager/conf2/Device.java \
	$(srcdir)/src/org/micromanager/conf2/DevicesPage.java \
	$(srcdir)/src/org/micromanager/conf2/DetectorJDialog.java \
	$(srcdir)/src/org/micromanager/conf2/FinishPage.java \
	$(srcdir)/src/org/micromanager/conf2/IntroPage.java \
	$(srcdir)/src/org/micromanager/conf2/Label.java \
	$(srcdir)/src/org/micromanager/conf2/LabelsPage.java \
	$(srcdir)/src/org/micromanager/conf2/MMConfigFileException.java \
	$(srcdir)/src/org/micromanager/conf2/MicroscopeModel.java \
	$(srcdir)/src/org/micromanager/conf2/PagePanel.java \
	$(srcdir)/src/org/micromanager/conf2/PeripheralSetupDlg.java \
	$(srcdir)/src/org/micromanager/conf2/PropertyTableModel.java \
	$(srcdir)/src/org/micromanager/conf2/RolesPage.java \
	$(srcdir)/src/org/micromanager/conf2/Setting.java \
	$(srcdir)/src/org/micromanager/graph/ContrastPanel.java \
	$(srcdir)/src/org/micromanager/graph/GraphData.java \
	$(srcdir)/src/org/micromanager/graph/GraphFrame.java \
	$(srcdir)/src/org/micromanager/graph/GraphPanel.java \
	$(srcdir)/src/org/micromanager/graph/HistogramPanel.java \
	$(srcdir)/src/org/micromanager/navigation/CenterAndDragListener.java \
	$(srcdir)/src/org/micromanager/navigation/XYZKeyListener.java \
	$(srcdir)/src/org/micromanager/navigation/ZWheelListener.java \
	$(srcdir)/src/org/micromanager/script/BeanshellEngine.java \
	$(srcdir)/src/org/micromanager/utils/AcqOrderMode.java \
	$(srcdir)/src/org/micromanager/utils/AutofocusBase.java \
	$(srcdir)/src/org/micromanager/utils/AutofocusManager.java \
	$(srcdir)/src/org/micromanager/utils/AutofocusPropertyEditor.java \
	$(srcdir)/src/org/micromanager/utils/Calibration.java \
	$(srcdir)/src/org/micromanager/utils/CalibrationList.java \
	$(srcdir)/src/org/micromanager/utils/ChannelSpec.java \
	$(srcdir)/src/org/micromanager/utils/ColorEditor.java \
	$(srcdir)/src/org/micromanager/utils/ColorRenderer.java \
	$(srcdir)/src/org/micromanager/utils/ContrastSettings.java \
	$(srcdir)/src/org/micromanager/utils/CoreAutofocus.java \
	$(srcdir)/src/org/micromanager/utils/DisplayMode.java \
	$(srcdir)/src/org/micromanager/utils/FileDialogs.java \
	$(srcdir)/src/org/micromanager/utils/GammaSliderCalculator.java \
	$(srcdir)/src/org/micromanager/utils/GUIColors.java \
	$(srcdir)/src/org/micromanager/utils/GUIUtils.java \
	$(srcdir)/src/org/micromanager/utils/HotKeyAction.java \
	$(srcdir)/src/org/micromanager/utils/HotKeys.java \
	$(srcdir)/src/org/micromanager/utils/HotKeysDialog.form \
	$(srcdir)/src/org/micromanager/utils/HotKeysDialog.java \
	$(srcdir)/src/org/micromanager/utils/HttpUtils.java \
	$(srcdir)/src/org/micromanager/utils/ImageUtils.java \
	$(srcdir)/src/org/micromanager/utils/JavaUtils.java \
	$(srcdir)/src/org/micromanager/utils/LargeMessageDlg.java \
	$(srcdir)/src/org/micromanager/utils/MDUtils.java \
	$(srcdir)/src/org/micromanager/utils/MMAutofocusException.java \
	$(srcdir)/src/org/micromanager/utils/MMDialog.java \
	$(srcdir)/src/org/micromanager/utils/MMException.java \
	$(srcdir)/src/org/micromanager/utils/MMFrame.java \
	$(srcdir)/src/org/micromanager/utils/MMScriptException.java \
	$(srcdir)/src/org/micromanager/utils/MMSerializationException.java \
	$(srcdir)/src/org/micromanager/utils/MathFunctions.java \
	$(srcdir)/src/org/micromanager/utils/MemoryUtils.java \
	$(srcdir)/src/org/micromanager/utils/NumberUtils.java \
	$(srcdir)/src/org/micromanager/utils/ProgressBar.java \
	$(srcdir)/src/org/micromanager/utils/PropertyUsageCellEditor.java \
	$(srcdir)/src/org/micromanager/utils/PropertyValueCellEditor.java \
	$(srcdir)/src/org/micromanager/utils/PropertyUsageCellRenderer.java \
	$(srcdir)/src/org/micromanager/utils/PropertyNameCellRenderer.java \
	$(srcdir)/src/org/micromanager/utils/PropertyValueCellRenderer.java \
	$(srcdir)/src/org/micromanager/utils/PropertyItem.java \
	$(srcdir)/src/org/micromanager/utils/PropertyTableData.java \
	$(srcdir)/src/org/micromanager/utils/ReportingUtils.java \
	$(srcdir)/src/org/micromanager/utils/ScriptFileFilter.java \
	$(srcdir)/src/org/micromanager/utils/ShowFlags.java \
	$(srcdir)/src/org/micromanager/utils/ShowFlagsPanel.java \
	$(srcdir)/src/org/micromanager/utils/SliderPanel.java \
	$(srcdir)/src/org/micromanager/utils/TextUtils.java \
	$(srcdir)/src/org/micromanager/utils/WaitDialog.java \
	$(srcdir)/bin/plugins_mmstudio.config
	test -d build || mkdir build
	rm -rf build/*
	cp $(srcdir)/bin/plugins_mmstudio.config build/plugins.config
	$(JAVAC) $(JAVACFLAGS) -sourcepath ../MMCoreJ_wrap:$(srcdir)/src:. -classpath $(IJJARPATH):$(BSHJARPATH):$(SWINGXJARPATH):$(COMMONSMATHJARPATH):$(SWINGLAYOUTJARPATH):$(CLASSEXT)/*:. $(srcdir)/src/*.java $(srcdir)/src/org/micromanager/acquisition/*.java $(srcdir)/src/org/micromanager/utils/*.java $(srcdir)/src/org/micromanager/api/*.java $(srcdir)/src/org/micromanager/conf2/*.java -d build
	cp -rf $(srcdir)/src/org/micromanager/icons build/org/micromanager
	cp -rf $(srcdir)/src/org/micromanager/conf2/*html build/org/micromanager/conf2
	cd build && jar cf ../MMJ_.jar *


# TODO Remove together with plugins_reader.config (obsolete)
MMReader_.jar: \
   $(srcdir)/MMJ_.jar  \
	$(srcdir)/bin/plugins_reader.config
	cp -f $(srcdir)/bin/plugins_reader.config build/plugins.config
	cd build && jar cf ../MMReader_.jar *


jardir = $(pkgdatadir)/jars
jar_DATA = MMJ_.jar


# TODO Fix classpath.
javadoc:
	$(MKDIR_P) doc
	rm -rf doc/*
	javadoc -public \
		-classpath $(IJJARPATH):$(BSHJARPATH):$(IJPATH)/plugins/Micro-Manager/MMCoreJ.jar:$(IJPATH)/plugins/Micro-Manager/MMJ_.jar:$(CLASSEXT)/scifio.jar:$(CLASSEXT)/commons-math-2.0.jar:. \
		-d doc \
		-sourcepath $(srcdir)/src \
		-subpackages org.micromanager


CLEANFILES = MMJ_.jar MMReader_.jar

clean-local:
	-find . -name \*.class -exec rm {} \;
	-rm -rf doc


EXTRA_DIST = bin src build.xml license.txt
